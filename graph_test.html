<!-- import sigma.js -->
<script src="javascript/sigma.min.js"></script>
<div id="container">
  <style>
    #graph-container {
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      position: absolute;
    }
  </style>
  <div id="graph-container"></div>
</div>
<script>
/**
 * This is a basic example on how to instantiate sigma. A random graph is
 * generated and stored in the "graph" variable, and then sigma is instantiated
 * directly with the graph.
 *
 * The simple instance of sigma is enough to make it render the graph on the on
 * the screen, since the graph is given directly to the constructor.
 */
var graphLevels = 3;
var g = { nodes: [], edges: [] };
var nodeLevels = [];

for(i = 0; i < graphLevels; i++) {
	nodeLevels.push([]);
}

function createNode(nodeName, nodeId, nodeX, nodeY, nodeSize = 10) {
	return {id: nodeId, label: nodeName, x: nodeX, y: nodeY, size: nodeSize, color: '#666'};
}

function createEdge(sourceNode, targetNode, edgeWidth = 1) {
	g.edges.push({id: sourceNode + '-' + targetNode, source: sourceNode, target: targetNode, size: edgeWidth, color: '#ccc'});
}

function addNode(level, nodeName, nodeId) {
	if(level > graphLevels || level < 1) {
		throw "graph level out of range";
	}

  node = createNode(nodeName, nodeId, 0, 0);
	nodeLevels[level - 1].push(node);
}

function arrangeNodes() {
  xOffset = 1/graphLevels;
  for(i = 0; i < graphLevels; i++) {
    yOffset = 1/nodeLevels[i].length;
    for(j = 0; j < nodeLevels[i].length; j++) {
      nodeLevels[i][j].x = i * xOffset + xOffset / 2;
      nodeLevels[i][j].y = j * yOffset + yOffset / 2;
    }
  }
}

function combineNodes() {
  allNodes = [];
  for(i = 0; i < graphLevels; i++) {
    for(j = 0; j < nodeLevels[i].length; j++) {
      allNodes.push(nodeLevels[i][j]);
    }
  }
  return allNodes;
}

addNode(1, 'CSC2202', 'CSC2202');
addNode(1, 'CSC2702', 'CSC2702');
addNode(1, 'CSC2912', 'CSC2912');
addNode(1, 'CSC2101', 'CSC2101');
addNode(1, 'CSC2901', 'CSC2901');
addNode(1, 'CSC2111', 'CSC2111');
addNode(1, 'CSC2000', 'CSC2000');

addNode(2, 'CSC3120', 'CSC3120');
addNode(2, 'CSC3402', 'CSC3402');
addNode(2, 'CSC3712', 'CSC3712');
addNode(2, 'CSC3011', 'CSC3011');
addNode(2, 'CSC3612', 'CSC3612');
addNode(2, 'CSC3801', 'CSC3801');
addNode(2, 'CSC3301', 'CSC3301');
addNode(2, 'CSC3600', 'CSC3600');

addNode(3, 'CSC4505', 'CSC4505');
addNode(3, 'CSC4631', 'CSC4631');
addNode(3, 'CSC4642', 'CSC4642');
addNode(3, 'CSC4792', 'CSC4792');
addNode(3, 'CSC4035', 'CSC4035');
addNode(3, 'CSC4004', 'CSC4004');
addNode(3, 'CSC4630', 'CSC4630');

arrangeNodes();

createEdge('CSC2202', 'CSC3801');
createEdge('CSC2702', 'CSC3712');
createEdge('CSC2912', 'CSC3402');
createEdge('CSC2101', 'CSC3120');
createEdge('CSC2101', 'CSC3612');
createEdge('CSC2901', 'CSC3011');
createEdge('CSC2111', 'CSC3120');
createEdge('CSC2000', 'CSC3301');
createEdge('CSC2000', 'CSC3600');

createEdge('CSC3120', 'CSC4505');
createEdge('CSC3402', 'CSC4792');
createEdge('CSC3712', 'CSC4792');
createEdge('CSC3612', 'CSC4004');
createEdge('CSC3301', 'CSC4035');
createEdge('CSC3600', 'CSC4630');
createEdge('CSC3600', 'CSC4631');
createEdge('CSC3600', 'CSC4642');

var allNodes = combineNodes();
var combinedGraph = {nodes : allNodes, edges : g.edges }
// Instantiate sigma:
s = new sigma({
  graph: combinedGraph,
  container: 'graph-container'
});
</script>
